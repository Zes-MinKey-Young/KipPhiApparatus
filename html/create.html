<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Create</title>
</head>
<body>
    <form action="/create" method="POST" enctype="multipart/form-data">
        <ul>
            <li>
                <label for="id">Identifier</label>
                <input type="text" name="id" id="id" placeholder="Id">
            </li>
            <li>
                <label for="title">Title</label>
                <input type="text" name="title" id="title" placeholder="Title">
            </li>
            <li>
                <label for="bpm">BPM</label>
                <input type="text" name="bpm" id="bpm" placeholder="BPM">
            </li>
            <li>
                <label for="illustration">Illustration</label>
                <input type="file" name="illustration" id="illustration">
            </li>
            <li>
                <label for="music">Music</label>
                <input type="file" name="music" id="music">
            </li>
            <li>
                <input type="submit" value="Create"></input>
            </li>
        </ul>
    </form>
    
    <script>
        let supportsServer = false;
        fetch("/status")
            .then(res => {
                return supportsServer = res.status === 204;
            })
        function downloadFile(str) {
            const blob = new Blob([str], { type: "application/json" });
            const url = window.URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = url;
            a.download = "chart.json";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            return true;
        }
        document.querySelector("form").addEventListener("submit", function (e) {
            const nameInput = document.getElementById("id");
            const titleInput = document.getElementById("title");
            const bpmInput = document.getElementById("bpm");
            const bpmStr = bpmInput.value.trim();
            if (nameInput.value.trim() === "" || titleInput.value.trim() === "") {
                e.preventDefault();
                alert("请填写歌曲名称和标题");
                return;
            }
            if (bpmStr === "") {
                e.preventDefault();
                alert("请填写 BPM");
                return;
            }
            const bpm = parseFloat(bpmStr);


    
            if (isNaN(bpm) || bpm <= 0) {
                e.preventDefault();
                alert("BPM 必须为正数");
                return;
            }
            const music = document.getElementById("music").files[0];
            if (!supportsServer) {
                e.preventDefault();
                if (!music) {
                    alert("请选择音乐文件");
                    return;
                }
                const audio = new Audio();
                audio.src = URL.createObjectURL(music);
                audio.addEventListener("loadedmetadata", function () {
                    const duration = audio.duration;
                    downloadFile(`{"offset":0,"duration":${duration},"info":{"level":"0","name":"${titleInput.value.trim()}}","envEasings":[],"eventNodeSequences":[{"id":"#0.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#0.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#0.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#0.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#0.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#1.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#1.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#1.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#1.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#1.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#2.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#2.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#2.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#2.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#2.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#3.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#3.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#3.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#3.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#3.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#4.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#4.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#4.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#4.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#4.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#5.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#5.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#5.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#5.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#5.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#6.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#6.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#6.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#6.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#6.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#7.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#7.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#7.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#7.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#7.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#8.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#8.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#8.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#8.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#8.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#9.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#9.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#9.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#9.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#9.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#10.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#10.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#10.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#10.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#10.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#11.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#11.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#11.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#11.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#11.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#12.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#12.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#12.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#12.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#12.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#13.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#13.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#13.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#13.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#13.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#14.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#14.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#14.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#14.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#14.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#15.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#15.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#15.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#15.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#15.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#16.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#16.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#16.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#16.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#16.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#17.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#17.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#17.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#17.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#17.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#18.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#18.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#18.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#18.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#18.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#19.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#19.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#19.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#19.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#19.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#20.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#20.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#20.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#20.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#20.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#21.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#21.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#21.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#21.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#21.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#22.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#22.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#22.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#22.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#22.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]},{"id":"#23.0.moveX","type":0,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#23.0.moveY","type":1,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#23.0.rotate","type":2,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#23.0.alpha","type":3,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":0,"end":0}]},{"id":"#23.0.speed","type":4,"events":[{"startTime":[0,0,1],"endTime":[1,0,1],"bezier":0,"easingLeft":0,"easingRight":1,"start":10,"end":10}]}],\
                    "orphanLines":[{"id":0,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#0.0.moveX","moveY":"#0.0.moveY","rotate":"#0.0.rotate","alpha":"#0.0.alpha","speed":"#0.0.speed"}],"children":[]},{"id":1,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#1.0.moveX","moveY":"#1.0.moveY","rotate":"#1.0.rotate","alpha":"#1.0.alpha","speed":"#1.0.speed"}],"children":[]},{"id":2,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#2.0.moveX","moveY":"#2.0.moveY","rotate":"#2.0.rotate","alpha":"#2.0.alpha","speed":"#2.0.speed"}],"children":[]},{"id":3,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#3.0.moveX","moveY":"#3.0.moveY","rotate":"#3.0.rotate","alpha":"#3.0.alpha","speed":"#3.0.speed"}],"children":[]},{"id":4,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#4.0.moveX","moveY":"#4.0.moveY","rotate":"#4.0.rotate","alpha":"#4.0.alpha","speed":"#4.0.speed"}],"children":[]},{"id":5,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#5.0.moveX","moveY":"#5.0.moveY","rotate":"#5.0.rotate","alpha":"#5.0.alpha","speed":"#5.0.speed"}],"children":[]},{"id":6,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#6.0.moveX","moveY":"#6.0.moveY","rotate":"#6.0.rotate","alpha":"#6.0.alpha","speed":"#6.0.speed"}],"children":[]},{"id":7,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#7.0.moveX","moveY":"#7.0.moveY","rotate":"#7.0.rotate","alpha":"#7.0.alpha","speed":"#7.0.speed"}],"children":[]},{"id":8,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#8.0.moveX","moveY":"#8.0.moveY","rotate":"#8.0.rotate","alpha":"#8.0.alpha","speed":"#8.0.speed"}],"children":[]},{"id":9,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#9.0.moveX","moveY":"#9.0.moveY","rotate":"#9.0.rotate","alpha":"#9.0.alpha","speed":"#9.0.speed"}],"children":[]},{"id":10,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#10.0.moveX","moveY":"#10.0.moveY","rotate":"#10.0.rotate","alpha":"#10.0.alpha","speed":"#10.0.speed"}],"children":[]},{"id":11,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#11.0.moveX","moveY":"#11.0.moveY","rotate":"#11.0.rotate","alpha":"#11.0.alpha","speed":"#11.0.speed"}],"children":[]},{"id":12,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#12.0.moveX","moveY":"#12.0.moveY","rotate":"#12.0.rotate","alpha":"#12.0.alpha","speed":"#12.0.speed"}],"children":[]},{"id":13,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#13.0.moveX","moveY":"#13.0.moveY","rotate":"#13.0.rotate","alpha":"#13.0.alpha","speed":"#13.0.speed"}],"children":[]},{"id":14,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#14.0.moveX","moveY":"#14.0.moveY","rotate":"#14.0.rotate","alpha":"#14.0.alpha","speed":"#14.0.speed"}],"children":[]},{"id":15,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#15.0.moveX","moveY":"#15.0.moveY","rotate":"#15.0.rotate","alpha":"#15.0.alpha","speed":"#15.0.speed"}],"children":[]},{"id":16,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#16.0.moveX","moveY":"#16.0.moveY","rotate":"#16.0.rotate","alpha":"#16.0.alpha","speed":"#16.0.speed"}],"children":[]},{"id":17,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#17.0.moveX","moveY":"#17.0.moveY","rotate":"#17.0.rotate","alpha":"#17.0.alpha","speed":"#17.0.speed"}],"children":[]},{"id":18,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#18.0.moveX","moveY":"#18.0.moveY","rotate":"#18.0.rotate","alpha":"#18.0.alpha","speed":"#18.0.speed"}],"children":[]},{"id":19,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#19.0.moveX","moveY":"#19.0.moveY","rotate":"#19.0.rotate","alpha":"#19.0.alpha","speed":"#19.0.speed"}],"children":[]},{"id":20,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#20.0.moveX","moveY":"#20.0.moveY","rotate":"#20.0.rotate","alpha":"#20.0.alpha","speed":"#20.0.speed"}],"children":[]},{"id":21,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#21.0.moveX","moveY":"#21.0.moveY","rotate":"#21.0.rotate","alpha":"#21.0.alpha","speed":"#21.0.speed"}],"children":[]},{"id":22,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#22.0.moveX","moveY":"#22.0.moveY","rotate":"#22.0.rotate","alpha":"#22.0.alpha","speed":"#22.0.speed"}],"children":[]},{"id":23,"group":0,"hnLists":{},"nnLists":{},"Name":"unknown","Texture":"line.png","eventLayers":[{"moveX":"#23.0.moveX","moveY":"#23.0.moveY","rotate":"#23.0.rotate","alpha":"#23.0.alpha","speed":"#23.0.speed"}],"children":[]}],
                    "bpmList":[{"bpm":${bpm},"startTime":[0,0,1]}],"judgeLineGroups":["Default"]}`)

                })
                
                return;
            }
    
            const illustration = document.getElementById("illustration").files[0];
    
            if (!illustration || !music) {
                e.preventDefault();
                alert("请选择插图和音乐文件");
                return;
            }
        });
    </script>
</body>
</html>